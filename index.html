<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Lumina</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="assets/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

</head>
<body>
    <script>
        // Function to fetch the tokens from the JSON file on GitHub
        async function fetchTokens() {
            try {
                const response = await fetch("https://raw.githubusercontent.com/Molnsc/WatchWithAzrys/refs/heads/main/lumina.json");
                const data = await response.json();
                return data.tokens || [];
            } catch (error) {
                console.error("Error fetching tokens:", error);
                alert("Error loading token data.");
                return [];
            }
        }

        // Function to show the token entry modal
        function showTokenModal() {
            const modal = document.createElement("div");
            modal.id = "tokenModal";
            modal.style.position = "fixed";
            modal.style.top = "0";
            modal.style.left = "0";
            modal.style.width = "100vw";
            modal.style.height = "100vh";
            modal.style.backgroundColor = "rgba(0, 0, 0, 0.5)";
            modal.style.display = "flex";
            modal.style.justifyContent = "center";
            modal.style.alignItems = "center";
            modal.style.zIndex = "1000";

            const modalContent = document.createElement("div");
            modalContent.style.backgroundColor = "#1a1a1a";
            modalContent.style.padding = "20px";
            modalContent.style.borderRadius = "8px";
            modalContent.style.color = "#fff";
            modalContent.style.textAlign = "center";
            modalContent.style.maxWidth = "400px";
            modalContent.style.width = "100%";

            const message = document.createElement("h3");
            message.innerText = "Please Enter Access Token";
            modalContent.appendChild(message);

            const input = document.createElement("input");
            input.type = "text";
            input.placeholder = "Enter Access Token";
            input.style.padding = "10px";
            input.style.marginTop = "20px";
            input.style.width = "80%";
            input.style.borderRadius = "6px";
            input.style.border = "1px solid #ccc";
            input.style.color = "#fff";
            input.style.backgroundColor = "#2d2d2d";
            modalContent.appendChild(input);

            const submitBtn = document.createElement("button");
            submitBtn.innerText = "Submit";
            submitBtn.style.padding = "10px 20px";
            submitBtn.style.marginTop = "20px";
            submitBtn.style.backgroundColor = "#2d2d2d";
            submitBtn.style.color = "#fff";
            submitBtn.style.border = "none";
            submitBtn.style.borderRadius = "6px";
            submitBtn.style.cursor = "pointer";
            submitBtn.style.transition = "transform 0.3s ease";
            submitBtn.onclick = () => handleTokenSubmit(input.value);
            modalContent.appendChild(submitBtn);

            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }

        // Handle the token submission
        async function handleTokenSubmit(token) {
            const tokens = await fetchTokens();
            const tokenMatch = tokens.find(tokenObj => tokenObj.tokendata === token);

            if (tokenMatch) {
                // Save the person's name to localStorage
                localStorage.setItem("person", tokenMatch.person);
                alert(`Welcome, ${tokenMatch.person}!`);
                document.getElementById("tokenModal").remove(); // Close the modal
            } else {
                alert("Incorrect Info");
                window.location.reload(); // Reload to allow the user to try again
            }
        }

        // Function to check the token status when the page loads
        async function checkToken() {
            const storedPerson = localStorage.getItem("person");
            if (storedPerson) {
                // If a person is already saved in localStorage, skip the token prompt
                const versionTag = document.querySelector(".version-tag");
                versionTag.textContent = storedPerson;
                return;
            }

            // Show the token modal if no person is found in localStorage

        }

        // Toggle announcement section
        function toggleAnnouncement() {
            const content = document.getElementById("announcementContent");
            const toggle = document.getElementById("announcementToggle");
            const isHidden = content.classList.contains("hidden");

            if (isHidden) {
                content.classList.remove("hidden");
                toggle.classList.remove("collapsed");
                toggle.textContent = "‚ñº";
                localStorage.setItem("announcementCollapsed", "false");
            } else {
                content.classList.add("hidden");
                toggle.classList.add("collapsed");
                toggle.textContent = "‚ñ≤";
                localStorage.setItem("announcementCollapsed", "true");
            }
        }

        // Check announcement state on load
        function checkAnnouncementState() {
            const isCollapsed = localStorage.getItem("announcementCollapsed") === "true";
            if (isCollapsed) {
                const content = document.getElementById("announcementContent");
                const toggle = document.getElementById("announcementToggle");
                content.classList.add("hidden");
                toggle.classList.add("collapsed");
                toggle.textContent = "‚ñ≤";
            }
        }

        // Settings functions
        function toggleSettings() {
            const panel = document.getElementById('settingsPanel');
            const overlay = document.getElementById('settingsOverlay');
            panel.classList.toggle('open');
            overlay.classList.toggle('open');
        }

        function closeSettings() {
            const panel = document.getElementById('settingsPanel');
            const overlay = document.getElementById('settingsOverlay');
            panel.classList.remove('open');
            overlay.classList.remove('open');
        }

        function toggleTransparent() {
            const toggle = document.getElementById('transparentToggle');
            const body = document.body;
            toggle.classList.toggle('active');
            body.classList.toggle('transparent');
            localStorage.setItem('transparentMode', body.classList.contains('transparent'));
        }

        function toggleAutoplay() {
            const toggle = document.getElementById('autoplayToggle');
            toggle.classList.toggle('active');
            localStorage.setItem('autoplayEnabled', toggle.classList.contains('active'));
        }

        function toggleSaveProgress() {
            const toggle = document.getElementById('saveProgressToggle');
            toggle.classList.toggle('active');
            localStorage.setItem('saveProgressEnabled', toggle.classList.contains('active'));
        }

        function toggleHideFilters() {
            const toggle = document.getElementById('hideFiltersToggle');
            toggle.classList.toggle('active');
            const isHidden = toggle.classList.contains('active');
            localStorage.setItem('hideFilters', isHidden);

            const filtersSection = document.querySelector('.filters-section');
            if (filtersSection) {
                filtersSection.style.display = isHidden ? 'block' : 'block';
            }
        }

        function toggleHideAnnouncement() {
            const toggle = document.getElementById('hideAnnouncementToggle');
            toggle.classList.toggle('active');
            const isHidden = toggle.classList.contains('active');
            localStorage.setItem('hideAnnouncement', isHidden);

            const announcementSection = document.getElementById('announcementSection');
            if (announcementSection) {
                announcementSection.style.display = isHidden ? 'none' : 'block';
            }
        }

        function toggleHideTrending() {
            const toggle = document.getElementById('hideTrendingToggle');
            toggle.classList.toggle('active');
            const isHidden = toggle.classList.contains('active');
            localStorage.setItem('hideTrending', isHidden);

            const trendingSection = document.querySelector('.trending-section');
            if (trendingSection) {
                trendingSection.style.display = isHidden ? 'none' : 'block';
            }
        }

        function toggleHideGenres() {
            const toggle = document.getElementById('hideGenresToggle');
            toggle.classList.toggle('active');
            const isHidden = toggle.classList.contains('active');
            localStorage.setItem('hideGenres', isHidden);

            const genresSection = document.querySelector('.categories-section');
            if (genresSection) {
                genresSection.style.display = isHidden ? 'none' : 'block';
            }
        }

        function toggleHideMovies() {
            const toggle = document.getElementById('hideMoviesToggle');
            toggle.classList.toggle('active');
            const isHidden = toggle.classList.contains('active');
            localStorage.setItem('hideMovies', isHidden);

            const moviesGrid = document.getElementById('movies');
            if (moviesGrid) {
                moviesGrid.style.display = isHidden ? 'none' : 'grid';
            }
        }

        function toggleDeveloperMode() {
            const toggle = document.getElementById('developerModeToggle');
            if (!toggle) return;
            toggle.classList.toggle('active');
            const isEnabled = toggle.classList.contains('active');
            localStorage.setItem('developerMode', isEnabled);

            // Store in luminaSettings format for compatibility
            const settings = JSON.parse(localStorage.getItem('luminaSettings')) || {};
            settings.developerMode = isEnabled;
            localStorage.setItem('luminaSettings', JSON.stringify(settings));
        }

        function clearWatchHistory() {
            if (confirm('Are you sure you want to clear all watch history? This cannot be undone.')) {
                for (let i = localStorage.length - 1; i >= 0; i--) {
                    const key = localStorage.key(i);
                    if (key.startsWith('watchProgress_') || key.startsWith('lastClicked_') || key.startsWith('watchTime_')) {
                        localStorage.removeItem(key);
                    }
                }
                location.reload();
            }
        }

        // Color picker functionality
        document.addEventListener('DOMContentLoaded', () => {
            const colorOptions = document.querySelectorAll('.color-option');
            colorOptions.forEach(option => {
                option.addEventListener('click', () => {
                    colorOptions.forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    const color = option.dataset.color;
                    applyColorTheme(color);
                    localStorage.setItem('accentColor', color);
                });
            });

            // Load saved settings
            loadSettings();
        });

        function applyColorTheme(color) {
            const root = document.documentElement;
            const themes = {
                purple: { primary: '#8b5cf6', secondary: '#6366f1' },
                red: { primary: '#ef4444', secondary: '#dc2626' },
                green: { primary: '#10b981', secondary: '#059669' },
                blue: { primary: '#3b82f6', secondary: '#2563eb' },
                orange: { primary: '#f59e0b', secondary: '#d97706' },
                pink: { primary: '#ec4899', secondary: '#db2777' }
            };

            if (themes[color]) {
                root.style.setProperty('--accent-primary', themes[color].primary);
                root.style.setProperty('--accent-secondary', themes[color].secondary);

                // Update progress bars and buttons
                const style = document.createElement('style');
                style.textContent = `
                    .progress-fill, #progressFill { background: linear-gradient(90deg, ${themes[color].primary}, ${themes[color].secondary}) !important; }
                    .watch-btn:hover { background: ${themes[color].primary} !important; }
                    .play-overlay { background: ${themes[color].primary}cc !important; }
                `;
                document.head.appendChild(style);
            }
        }

        function loadSettings() {
            // Load transparent mode
            if (localStorage.getItem('transparentMode') === 'true') {
                document.body.classList.add('transparent');
                document.getElementById('transparentToggle').classList.add('active');
            }

            // Load autoplay setting
            if (localStorage.getItem('autoplayEnabled') === 'false') {
                document.getElementById('autoplayToggle').classList.remove('active');
            }

            // Load save progress setting
            if (localStorage.getItem('saveProgressEnabled') === 'false') {
                document.getElementById('saveProgressToggle').classList.remove('active');
            }

            // Load hide filters setting
            if (localStorage.getItem('hideFilters') === 'true') {
                document.getElementById('hideFiltersToggle').classList.add('active');
                const filtersSection = document.querySelector('.filters-section');
                if (filtersSection) {
                    filtersSection.style.display = 'none';
                }
            }

            // Load hide announcement setting
            if (localStorage.getItem('hideAnnouncement') === 'true') {
                document.getElementById('hideAnnouncementToggle').classList.add('active');
                const announcementSection = document.getElementById('announcementSection');
                if (announcementSection) {
                    announcementSection.style.display = 'none';
                }
            }

            // Load hide trending setting
            if (localStorage.getItem('hideTrending') === 'true') {
                document.getElementById('hideTrendingToggle').classList.add('active');
                const trendingSection = document.querySelector('.trending-section');
                if (trendingSection) {
                    trendingSection.style.display = 'none';
                }
            }

            // Load hide genres setting
            if (localStorage.getItem('hideGenres') === 'true') {
                document.getElementById('hideGenresToggle').classList.add('active');
                const genresSection = document.querySelector('.categories-section');
                if (genresSection) {
                    genresSection.style.display = 'none';
                }
            }

            // Load hide movies setting
            if (localStorage.getItem('hideMovies') === 'true') {
                document.getElementById('hideMoviesToggle').classList.add('active');
                const moviesGrid = document.getElementById('movies');
                if (moviesGrid) {
                    moviesGrid.style.display = 'none';
                }
            }

            // Load developer mode setting
            if (localStorage.getItem('developerMode') === 'true' || 
                (JSON.parse(localStorage.getItem('luminaSettings')) || {}).developerMode) {
                const devToggle = document.getElementById('developerModeToggle');
                if (devToggle) devToggle.classList.add('active');
            }

            // Load accent color
            const savedColor = localStorage.getItem('accentColor') || 'purple';
            const colorOption = document.querySelector(`[data-color="${savedColor}"]`);
            if (colorOption) {
                document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
                colorOption.classList.add('active');
                applyColorTheme(savedColor);
            }
        }

        // Settings tab switching
        function switchSettingsTab(tabName) {
            // Remove active class from all tabs and contents
            document.querySelectorAll('.settings-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.settings-tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Add active class to selected tab and content
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // Run the function when the page loads
        document.addEventListener("DOMContentLoaded", () => {
            checkToken();

            // Apply UI visibility settings after a short delay to ensure elements are loaded
            setTimeout(() => {
                if (localStorage.getItem('hideFilters') === 'true') {
                    const filtersSection = document.querySelector('.filters-section');
                    if (filtersSection) filtersSection.style.display = 'none';
                }

                if (localStorage.getItem('hideAnnouncement') === 'true') {
                    const announcementSection = document.getElementById('announcementSection');
                    if (announcementSection) announcementSection.style.display = 'none';
                }

                if (localStorage.getItem('hideTrending') === 'true') {
                    const trendingSection = document.querySelector('.trending-section');
                    if (trendingSection) trendingSection.style.display = 'none';
                }

                if (localStorage.getItem('hideGenres') === 'true') {
                    const genresSection = document.querySelector('.categories-section');
                    if (genresSection) genresSection.style.display = 'none';
                }

                if (localStorage.getItem('hideMovies') === 'true') {
                    const moviesGrid = document.getElementById('movies');
                    if (moviesGrid) moviesGrid.style.display = 'none';
                }
            }, 100);
        });


    </script>
    <nav class="navbar">
        <script>
            // Ensure showSection is available immediately
            function showSection(sectionName) {
                // This will be overridden by script.js but provides fallback
                console.log('Switching to section:', sectionName);
            }
        </script>
        <div class="nav-content">
            <div class="nav-left">
                <h1 class="logo">Lumina</h1>
                <span class="version-tag">Beta 1.517</span>
            </div>
            <div class="nav-right">
                <button class="search-toggle-btn" onclick="toggleSearch()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>
                    </svg>
                </button>

                <button class="search-toggle-btn" onclick="showUpdatesPopup()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 20h4v2h-4zm6-20H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zm-2 18h-4v-2h4v2zm2-8H8V4h8v6z"/>
                    </svg>
                </button>

                <button class="settings-btn desktop-only" onclick="toggleSettings()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/>
                    </svg>
                </button>
            </div>
        </div>
        <!-- Collapsible Search Bar -->
        <div class="search-overlay" id="searchOverlay" onclick="closeSearch()"></div>
        <div class="search-container collapsed" id="searchContainer">
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search movies and TV shows...">
                <button class="search-btn" onclick="searchMovies()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>
                    </svg>
                </button>
                <button class="close-search-btn" onclick="closeSearch()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Dedicated Search Results UI -->
    <div class="search-results-overlay" id="searchResultsOverlay" onclick="closeSearchResults()"></div>
    <div class="search-results-container" id="searchResultsContainer">
        <div class="search-results-header">
            <h2 class="search-results-title" id="searchResultsTitle">Search Results</h2>
            <button class="search-results-close" onclick="closeSearchResults()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        <div class="search-results-content">
            <div class="search-results-stats" id="searchResultsStats"></div>
            <div class="search-loading" id="searchLoading" style="display: none;">
                <div class="spinner"></div>
            </div>
            <div class="search-results-grid" id="searchResultsGrid"></div>
            <div class="search-results-empty" id="searchResultsEmpty" style="display: none;">
                <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor">
                    <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>
                </svg>
                <h3>No Results Found</h3>
                <p>Try different keywords or check your spelling</p>
            </div>
        </div>
    </div>

    <div class="community-overlay" id="communityOverlay" onclick="closeCommunity()"></div>
    <div class="community-container" id="communityContainer">
        <div class="community-header">
            <div class="community-title-section">
                <h2 class="community-title">Community</h2>
                <div class="community-stats">
                    <span class="community-total">200.3K+ members in Community</span>
                    <span class="community-total">476K+ posts in community</span>
                </div>
            </div>
            <button class="community-close" onclick="closeCommunity()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
        <div class="community-content">
            <div class="community-feed" id="communityFeedMain">
                <div class="community-limit-notice">
                    Sorry at this time only the developer or original site users can access community, you are currently on an admin version of the site please go to the community site to view community posts.
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Bottom Navigation -->
    <div class="bottom-nav mobile-only">
        <button class="nav-item active" onclick="showSection('home')" data-section="home">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
            <span>Home</span>
        </button>
        <button class="nav-item" onclick="showSection('explore')" data-section="explore">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            <span>Explore</span>
        </button>
        <button class="nav-item" onclick="showSection('party')" data-section="party">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M2 22l1-2h18l1 2H2zm18.5-9c-.83 0-1.5-.67-1.5-1.5S19.67 10 20.5 10s1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm-17 0c-.83 0-1.5-.67-1.5-1.5S2.67 10 3.5 10 5 10.67 5 11.5 4.33 13 3.5 13zM12 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
            </svg>
            <span>Party</span>
        </button>
        <button class="nav-item" onclick="showSection('settings')" data-section="settings">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/>
            </svg>
            <span>Settings</span>
        </button>
    </div>

    <main>
        <div class="content-wrapper">
            <!-- Home Section -->
            <div class="section" id="homeSection">
                <div class="loading-spinner" id="loading">
                    <div class="spinner"></div>
                </div>

                <!-- Continue Watching Section will be inserted here by JavaScript -->


                <!-- Watch Later Section will be inserted here by JavaScript -->

                <!-- Empty State for Home -->
                <div class="empty-state" id="homeEmptyState" style="display: none;">
                    <div class="empty-card">
                        <svg width="80" height="80" viewBox="0 0 24 24" fill="currentColor" style="opacity: 0.3; margin-bottom: 1rem;">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                        <h3>Start Watching</h3>
                        <p>Watch movies or shows to get a resume card</p>
                        <p style="margin-top: 0.5rem; opacity: 0.7;">Click bookmark icon to save to watch later</p>
                    </div>
                </div>
            </div>

            <!-- Explore Section -->
            <div class="section hidden" id="exploreSection">
                <div class="filters-section">
                    <div class="filters">
                        <select id="typeFilter" class="filter-input">
                            <option value="movie">üé¨ Movies</option>
                            <option value="tv">üì∫ TV Shows</option>
                        </select>
                        <select id="yearFilter" class="filter-input">
                            <option value="">üìÖ All Years</option>
                            <script>
                                const currentYear = new Date().getFullYear();
                                for (let year = currentYear; year >= 1950; year--) {
                                    document.write(`<option value="${year}">${year}</option>`);
                                }
                            </script>
                        </select>
                        <select id="genreFilter" class="filter-input">
                            <option value="">üé≠ All Genres</option>
                            <option value="action">‚ö° Action</option>
                            <option value="comedy">üòÇ Comedy</option>
                            <option value="horror">üëª Horror</option>
                            <option value="drama">üé≠ Drama</option>
                            <option value="romance">üíï Romance</option>
                            <option value="sci-fi">üöÄ Sci-Fi</option>
                            <option value="thriller">üî• Thriller</option>
                            <option value="animation">üé® Animation</option>
                            <option value="documentary">üìö Documentary</option>
                        </select>
                        <select id="sortFilter" class="filter-input">
                            <option value="popularity.desc">‚≠ê Most Popular</option>
                            <option value="release_date.desc">üÜï Newest First</option>
                            <option value="vote_average.desc">üìä Highest Rated</option>
                            <option value="revenue.desc">üí∞ Top Grossing</option>
                        </select>
                        <button onclick="fetchData()" class="apply-btn">‚ú® Apply Filters</button>
                    </div>
                </div>

                <div class="trending-section">
                    <h2>Trending Now</h2>
                    <div id="trendingSlider" class="trending-slider"></div>
                </div>

                <div class="categories-section">
                    <h2>Browse by Genre</h2>
                    <div class="categories-slider">
                        <button onclick="fetchCategoryData('action')" class="category-btn active">Action</button>
                        <button onclick="fetchCategoryData('comedy')" class="category-btn">Comedy</button>
                        <button onclick="fetchCategoryData('horror')" class="category-btn">Horror</button>
                        <button onclick="fetchCategoryData('drama')" class="category-btn">Drama</button>
                        <button onclick="fetchCategoryData('romance')" class="category-btn">Romance</button>
                        <button onclick="fetchCategoryData('sci-fi')" class="category-btn">Sci-Fi</button>
                        <button onclick="fetchCategoryData('thriller')" class="category-btn">Thriller</button>
                        <button onclick="fetchCategoryData('animation')" class="category-btn">Animation</button>
                        <button onclick="fetchCategoryData('documentary')" class="category-btn">Documentary</button>
                    </div>
                </div>
                <div id="movies" class="movies-grid"></div>
                <div style="text-align: center; margin: 2rem 0;">
                    <button id="generateMoreBtn" onclick="generateMoreContent()" class="apply-btn" style="font-size: 1rem; padding: 1rem 2rem;">
                        Generate More
                    </button>
                </div>
            </div>

            <!-- Party Section -->
            <div class="section hidden" id="partySection" style="background: var(--background-dark); color: var(--text-primary);">
                <div class="party-container">
                    <div class="party-header">
                        <div class="party-icon">
                            <svg width="60" height="60" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2 22l1-2h18l1 2H2zm18.5-9c-.83 0-1.5-.67-1.5-1.5S19.67 10 20.5 10s1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm-17 0c-.83 0-1.5-.67-1.5-1.5S2.67 10 3.5 10 5 10.67 5 11.5 4.33 13 3.5 13zM12 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0 12c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
                            </svg>
                        </div>
                        <h1>Watch Party</h1>
                        <p>Watch together with friends in real-time</p>
                    </div>
                    <div class="party-actions">
                        <button class="party-btn create-party" onclick="createParty()">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                            </svg>
                            Create Party
                        </button>
                        <button class="party-btn join-party" onclick="joinParty()">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                            </svg>
                            Join Party
                        </button>
                    </div>
                    <div class="party-info">
                        <div class="party-feature">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21 6h-7.59l3.29-3.29L16 2l-4 4-4-4-.71.71L10.59 6H3c-1.1 0-2 .89-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.11-.9-2-2-2zm0 14H3V8h18v12z"/>
                            </svg>
                            <span>Synchronized playback</span>
                        </div>
                        <div class="party-feature">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/>
                            </svg>
                            <span>Live chat with friends</span>
                        </div>
                        <div class="party-feature">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            <span>No sign-up required</span>
                        </div>
                    </div>
                    <div class="party-coming-soon">
                        <span class="coming-soon-badge">Coming Soon</span>
                        <p>Watch Party is currently in development. Stay tuned for updates!</p>
                    </div>
                </div>
            </div>

            <!-- Profile Section -->
            <div class="section hidden" id="profileSection" style="background: var(--background-dark); color: var(--text-primary); display: none;">
                <!-- Firebase Auth Modal -->
                <div class="auth-modal" id="authModal" style="display: none;">
                    <div class="auth-modal-content">
                        <div class="auth-header">
                            <h2 id="authTitle">Welcome to Lumina</h2>
                            <button class="close-btn" onclick="closeAuth()">√ó</button>
                        </div>
                        <div class="auth-form">
                            <div class="auth-buttons">
                                <button class="auth-submit-btn primary" onclick="showSignInForm()">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                    Sign In
                                </button>
                                <button class="auth-submit-btn secondary" onclick="showSignUpForm()">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                    </svg>
                                    Sign Up
                                </button>
                            </div>
                        </div>

                        <!-- Sign In Form -->
                        <div class="auth-form-details" id="signInForm" style="display: none;">
                            <h3>Sign In to Your Account</h3>
                            <div class="form-group">
                                <label for="signInEmail">Email</label>
                                <input type="email" id="signInEmail" placeholder="Enter your email">
                            </div>
                            <div class="form-group">
                                <label for="signInPassword">Password</label>
                                <input type="password" id="signInPassword" placeholder="Enter your password">
                            </div>
                            <div class="auth-actions">
                                <button class="auth-submit-btn primary" onclick="handleSignIn()">Sign In</button>
                                <button class="auth-back-btn" onclick="showAuthButtons()">Back</button>
                            </div>
                            <div class="auth-links">
                                <a href="#" onclick="showResetPassword()">Forgot Password?</a>
                            </div>
                        </div>

                        <!-- Sign Up Form -->
                        <div class="auth-form-details" id="signUpForm" style="display: none;">
                            <h3>Create Your Account</h3>
                            <div class="form-group">
                                <label for="signUpEmail">Email</label>
                                <input type="email" id="signUpEmail" placeholder="Enter your email">
                            </div>
                            <div class="form-group">
                                <label for="signUpPassword">Password</label>
                                <input type="password" id="signUpPassword" placeholder="Create a password">
                            </div>
                            <div class="form-group">
                                <label for="confirmPassword">Confirm Password</label>
                                <input type="password" id="confirmPassword" placeholder="Confirm your password">
                            </div>
                            <div class="form-group">
                                <label for="displayName">Username</label>
                                <input type="text" id="displayName" placeholder="Choose a username">
                            </div>
                            <div class="auth-actions">
                                <button class="auth-submit-btn primary" onclick="handleSignUp()">Create Account</button>
                                <button class="auth-back-btn" onclick="showAuthButtons()">Back</button>
                            </div>
                        </div>

                        <!-- Password Reset Form -->
                        <div class="auth-form-details" id="resetPasswordForm" style="display: none;">
                            <h3>Reset Your Password</h3>
                            <div class="form-group">
                                <label for="resetEmail">Email</label>
                                <input type="email" id="resetEmail" placeholder="Enter your email">
                            </div>
                            <div class="auth-actions">
                                <button class="auth-submit-btn primary" onclick="handlePasswordReset()">Send Reset Email</button>
                                <button class="auth-back-btn" onclick="showSignInForm()">Back to Sign In</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile Content -->
                <div class="profile-content" id="profileContent">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <div class="avatar-circle" id="userAvatar">
                                <span id="avatarText">G</span>
                            </div>
                            <button class="edit-avatar-btn" onclick="editProfile()" id="editAvatarBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="profile-info">
                            <h1 class="profile-username" id="profileUsername">Guest</h1>
                            <p class="profile-email" id="profileEmail">guest@lumina.dev</p>
                            <p class="profile-description" id="profileDescription">Welcome to Lumina! Sign up to save your preferences and create playlists.</p>
                        </div>
                        <div class="profile-privacy-section" id="profilePrivacySection" style="display: none;">
                            <div class="privacy-toggle-main">
                                <div class="privacy-info">
                                    <label class="privacy-label">Profile Visibility</label>
                                    <span class="privacy-description">Control who can see your profile</span>
                                </div>
                                <div class="privacy-slider">
                                    <span class="privacy-option">Private</span>
                                    <label class="profile-privacy-switch">
                                        <input type="checkbox" id="profilePublic" onchange="updateProfilePrivacy()">
                                        <span class="privacy-switch-slider"></span>
                                    </label>
                                    <span class="privacy-option">Public</span>
                                </div>
                            </div>
                        </div>
                        <div class="profile-actions" id="profileActions">
                            <button class="profile-btn" onclick="showAuth()">Sign In</button>
                            <button class="profile-btn primary-btn" onclick="showAuth()">Sign Up</button>
                        </div>
                    </div>

                    <div class="profile-tabs">
                        <button class="tab-btn active" onclick="switchTab('watchlater')" data-tab="watchlater">Watch Later</button>
                        <button class="tab-btn" onclick="switchTab('playlists')" data-tab="playlists">Playlists</button>
                        <button class="tab-btn" onclick="switchTab('activity')" data-tab="activity">Activity</button>
                    </div>

                    <div class="tab-content">
                        <!-- Watch Later Tab -->
                        <div class="tab-pane active" id="watchlaterTab">
                            <div class="tab-header">
                                <h3>Watch Later</h3>
                                <div class="privacy-toggle" id="privacyToggleContainer">
                                    <label>
                                        <input type="checkbox" id="watchLaterPublic" onchange="updatePrivacySettings()">
                                        <span class="toggle-slider"></span>
                                        Public
                                    </label>
                                </div>
                            </div>
                            <div class="watch-later-grid" id="watchLaterGrid">
                                <!-- Watch later items will be populated here -->
                            </div>
                        </div>

                        <!-- Playlists Tab -->
                        <div class="tab-pane" id="playlistsTab">
                            <div class="tab-header">
                                <h3>Playlists</h3>
                                <button class="create-btn" onclick="createPlaylist()" id="createPlaylistBtn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                    </svg>
                                    Create Playlist
                                </button>
                            </div>
                            <div class="playlists-grid" id="playlistsGrid">
                                <!-- Playlists will be populated here -->
                            </div>
                        </div>

                        <!-- Activity Tab -->
                        <div class="tab-pane" id="activityTab">
                            <div class="tab-header">
                                <h3>Recent Activity</h3>
                            </div>
                            <div class="activity-feed" id="activityFeed">
                                <!-- Activity items will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Edit Profile Modal -->
                <div class="edit-modal" id="editModal" style="display: none;">
                    <div class="edit-modal-content">
                        <div class="edit-header">
                            <h2>Edit Profile</h2>
                            <button class="close-btn" onclick="closeEditModal()">√ó</button>
                        </div>
                        <div class="edit-form">
                            <div class="form-group">
                                <label for="editUsername">Username</label>
                                <input type="text" id="editUsername" placeholder="Enter username">
                            </div>
                            <div class="form-group">
                                <label for="editDescription">Description</label>
                                <textarea id="editDescription" placeholder="Tell us about yourself..." rows="3"></textarea>
                            </div>
                            <div class="form-actions">
                                <button class="cancel-btn" onclick="closeEditModal()">Cancel</button>
                                <button class="save-btn" onclick="saveProfile()">Save Changes</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Create Playlist Modal -->
                <div class="playlist-modal" id="playlistModal" style="display: none;">
                    <div class="playlist-modal-content">
                        <div class="playlist-header">
                            <h2>Create Playlist</h2>
                            <button class="close-btn" onclick="closePlaylistModal()">√ó</button>
                        </div>
                        <div class="playlist-form">
                            <div class="form-group">
                                <label for="playlistName">Playlist Name</label>
                                <input type="text" id="playlistName" placeholder="Enter playlist name">
                            </div>
                            <div class="form-group">
                                <label for="playlistDescription">Description</label>
                                <textarea id="playlistDescription" placeholder="Describe your playlist..." rows="2"></textarea>
                            </div>
                            <div class="privacy-toggle">
                                <label>
                                    <input type="checkbox" id="playlistPublic">
                                    <span class="toggle-slider"></span>
                                    Make Public
                                </label>
                            </div>
                            <div class="form-actions">
                                <button class="cancel-btn" onclick="closePlaylistModal()">Cancel</button>
                                <button class="save-btn" onclick="savePlaylist()">Create Playlist</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section hidden enhanced-mobile-settings" id="settingsSection">
                <div class="settings-header-mobile">
                    <div class="settings-title-mobile">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/>
                        </svg>
                        <div>
                            <h1>Settings</h1>
                            <p>Customize your Lumina experience</p>
                        </div>
                    </div>
                    <div class="user-profile">
                        <div class="avatar" style="background-color: white; color: black;">L</div>
                        <span class="username"></span>
                    </div>
                </div>

                <div class="settings-tabs-mobile">
                    <button class="settings-tab-mobile active" data-tab="appearance" onclick="switchMobileTab('appearance')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8z"/>
                        </svg>
                        Theme
                    </button>
                    <button class="settings-tab-mobile" data-tab="playback" onclick="switchMobileTab('playback')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                        Video
                    </button>
                    <button class="settings-tab-mobile" data-tab="interface" onclick="switchMobileTab('interface')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
                        </svg>
                        Layout
                    </button>
                    <button class="settings-tab-mobile" data-tab="advanced" onclick="switchMobileTab('advanced')">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
                        </svg>
                        Advanced
                    </button>
                </div>

                <div class="settings-content-mobile">
                    <!-- Appearance Tab -->
                    <div class="settings-tab-content active" id="appearance-tab">
                        <div class="settings-group-mobile">
                            <h3 class="group-title-mobile">Accent Color</h3>
                            <div class="color-options-mobile">
                                <button class="color-option active" data-color="purple" onclick="selectAccentColor('purple')" style="background: linear-gradient(135deg, #8b5cf6, #6366f1);"></button>
                                <button class="color-option" data-color="red" onclick="selectAccentColor('red')" style="background: linear-gradient(135deg, #ef4444, #dc2626);"></button>
                                <button class="color-option" data-color="green" onclick="selectAccentColor('green')" style="background: linear-gradient(135deg, #10b981, #059669);"></button>
                                <button class="color-option" data-color="blue" onclick="selectAccentColor('blue')" style="background: linear-gradient(135deg, #3b82f6, #2563eb);"></button>
                                <button class="color-option" data-color="orange" onclick="selectAccentColor('orange')" style="background: linear-gradient(135deg, #f59e0b, #d97706);"></button>
                                <button class="color-option" data-color="pink" onclick="selectAccentColor('pink')" style="background: linear-gradient(135deg, #ec4899, #db2777);"></button>
                            </div>
                        </div>
                        <div class="settings-group-mobile">
                            <h3 class="group-title-mobile">Display</h3>
                            <div class="setting-item-mobile">
                                <div class="setting-info-mobile">
                                    <span class="setting-label-mobile">Transparent Mode</span>
                                    <span class="setting-desc-mobile">Enable glass effect on cards</span>
                                </div>
                                <div class="toggle-switch" id="mobileTransparentToggle" onclick="toggleMobileTransparent()">
                                    <div class="toggle-slider-mobile"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Playback Tab -->
                    <div class="settings-tab-content" id="playback-tab">
                        <div class="settings-group-mobile">
                            <h3 class="group-title-mobile">Playback Settings</h3>
                            <div class="setting-item-mobile">
                                <div class="setting-info-mobile">
                                    <span class="setting-label-mobile">Autoplay</span>
                                    <span class="setting-desc-mobile">Auto-play next episode</span>
                                </div>
                                <div class="toggle-switch active" id="mobileAutoplayToggle" onclick="toggleMobileAutoplay()">
                                    <div class="toggle-slider-mobile"></div>
                                </div>
                            </div>
                            <div class="setting-item-mobile">
                                <div class="setting-info-mobile">
                                    <span class="setting-label-mobile">Save Progress</span>
                                    <span class="setting-desc-mobile">Remember watch position</span>
                                </div>
                                <div class="toggle-switch active" id="mobileSaveProgressToggle" onclick="toggleMobileSaveProgress()">
                                    <div class="toggle-slider-mobile"></div>
                                </div>
                            </div>
                            <div class="setting-item-mobile">
                                <div class="setting-info-mobile">
                                    <span class="setting-label-mobile">Show Time Left Progress Bar</span>
                                    <span class="setting-desc-mobile">Display visual progress bar under time remaining</span>
                                </div>
                                <div class="toggle-switch active" id="mobileTimeProgressToggle" onclick="toggleMobileTimeProgress()">
                                    <div class="toggle-slider-mobile"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Interface Tab -->
                    <div class="settings-tab-content" id="interface-tab">
                        <div class="settings-group-mobile">
                            <h3 class="group-title-mobile">Show/Hide Sections</h3>
                            <div class="setting-item-mobile">
                                <div class="setting-info-mobile">
                                    <span class="setting-label-mobile">Hide Announcement</span>
                                    <span class="setting-desc-mobile">Hide announcement banner</span>
                                </div>
                                <div class="toggle-switch" id="mobileHideAnnouncementToggle" onclick="toggleMobileHideAnnouncement()">
                                    <div class="toggle-slider-mobile"></div>
                                </div>
                            </div>
                            <div class="setting-item-mobile">
                                <div class="setting-info-mobile">
                                    <span class="setting-label-mobile">Hide Trending</span>
                                    <span class="setting-desc-mobile">Hide trending section</span>
                                </div>
                                <div class="toggle-switch" id="mobileHideTrendingToggle" onclick="toggleMobileHideTrending()">
                                    <div class="toggle-slider-mobile"></div>
                                </div>
                            </div>
                            <div class="setting-item-mobile">
                                <div class="setting-info-mobile">
                                    <span class="setting-label-mobile">Hide Filters</span>
                                    <span class="setting-desc-mobile">Hide filter options</span>
                                </div>
                                <div class="toggle-switch" id="mobileHideFiltersToggle" onclick="toggleMobileHideFilters()">
                                    <div class="toggle-slider-mobile"></div>
                                </div>
                            </div>
                            <div class="setting-item-mobile">
                                <div class="setting-info-mobile">
                                    <span class="setting-label-mobile">Hide Genres</span>
                                    <span class="setting-desc-mobile">Hide genre buttons</span>
                                </div>
                                <div class="toggle-switch" id="mobileHideGenresToggle" onclick="toggleMobileHideGenres()">
                                    <div class="toggle-slider-mobile"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Advanced Tab -->
                    <div class="settings-tab-content" id="advanced-tab">
                        <div class="settings-group-mobile">
                            <h3 class="group-title-mobile">Developer Options</h3>
                            <div class="setting-item-mobile">
                                <div class="setting-info-mobile">
                                    <span class="setting-label-mobile">Developer Mode</span>
                                    <span class="setting-desc-mobile">Show debug info</span>
                                </div>
                                <div class="toggle-switch" id="mobileDeveloperModeToggle" onclick="toggleMobileDeveloperMode()">
                                    <div class="toggle-slider-mobile"></div>
                                </div>
                            </div>
                        </div>
                        <div class="settings-group-mobile">
                            <h3 class="group-title-mobile">Data Management</h3>
                            <button class="danger-btn-mobile" onclick="clearWatchHistory()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                </svg>
                                Clear Watch History
                            </button>
                        </div>
                    </div>
































































































































































































































































                </div>
            </div>
        </div>

    </main>

    <div class="mobile-settings-overlay" id="mobileSettingsOverlay" onclick="closeMobileSettings()"></div>

    <script src="script.js"></script>
</body>
</html>
